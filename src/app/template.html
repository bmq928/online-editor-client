<div style="display:flex;flex-direction:column;height:100%;" class="slim-scroller">
    <!--<wi-login register-url="https://www.i2g.cloud/register-information/" app-name="Wi Python" login-url="https://users.i2g.cloud/login"></wi-login>-->
    <wi-login register-url="https://www.i2g.cloud/register-information/" app-name="Wi Python"
              login-url="{{self.loginUrl}}" query-string="self.queryString"></wi-login>

    <tools style="z-index: 1;" find-all-projects="self.findAllProjects" all-projects="self.allProjects"
           open-project="self.openProject" close-project="self.closeProject" create-new-project="self.createNewProject"
           delete-project="self.deleteProject" create-new-file="self.createNewFile"
           create-new-folder="self.createNewFolder"
           delete-item="self.deleteItem" add-func="self.addFunction" save-code="self.saveCode" run-code="self.runCode"
           code-palette="self.getCurveTree" remove-code-palette="self.removeTreeConfig"
           get-curve-tree="self.getCurveTree"
           remove-tree-config="self.removeTreeConfig" delete-checked="self.deleteChecked"
           save-checked="self.saveChecked"
           refresh-checked="self.refreshChecked" new-checked="self.newChecked"
           generate-login-by-token="self.generateLoginByToken" generate-login-byaccount="self.generateLoginByAccount"
           generate-save-curve-data="self.generateSaveCurveData" about-wi-python="self.aboutWiPython">
    </tools>

    <div class="app" style="z-index: 0;">
        <div style="border-right: 1px solid #c7c7c7;">
            <side-bar my-default-width="235" orientation="e" collapsed="false">
                <wi-tree-view tree-root="self.currentProject" get-label="self.getLabel4Python"
                              get-icon="self.getIcon4Python"
                              get-children="self.getChildren4Python"
                              hide-unmatched="true" selected-ids="self.selectedIdsHash"
                              run-match="self.runMatch4Python"
                              uncollapsible="false"
                              click-fn='self.clickFunction4Python'>
                    <div style="padding: 10px 13px; border-bottom: 1px solid #e4e4e4;" class="label-list-view ng-scope"><span>PROJECTS</span>
                        <span class="fn-button" 
                        ng-click="self.deleteFn()"> DELETE</span>
                        <span class="fn-button" 
                        ng-click="self.renameFn()">RENAME</span>
                    </div>
                </wi-tree-view>
            </side-bar>
        </div>
        <div style="width:100%; display: flex; flex-direction: column; border-right: 1px solid #c7c7c7;background: #fff;">
            <div class="label-list-view" style="padding: 11px 13px 14px 13px; border-bottom: 1px solid #e4e4e4; justify-content: space-between;">
                <div>
                    <span>EDITOR </span><span ng-show="self.selectedNode && self.selectedNode.path">- ({{self.selectedNode.path}})</span>
                    <span class="fn-button" 
                        ng-click="self.runCode()">
                        <i class="fa fa-play" style="margin-right: 8px; color: #37a0ff;"></i>RUN CODE</span>
                    <span class="fn-button"  
                        ng-click="self.saveCode()">SAVE CODE</span>
                    <span class="fn-button" style=" color: #ccc;" ng-class="{autoSaveClass: self.autoSave}"
                        ng-click="self.autoSave = !self.autoSave;">
                        <i class="fa fa-check" style="margin-right: 8px;"></i>AUTO SAVE</span>
                </div>
                <div class="askSaveHover">
                    <span class="askTooltip">Warning when don't save file</span>
                    <span class="fn-button" style=" color: #ccc;" ng-class="{autoSaveClass: !self.askSave}"
                        ng-click="self.askSave = !self.askSave;">
                        <i class="fa fa-check" style="margin-right: 8px;"></i>ASK SAVE</span>
                </div>
            </div>
            <div style="display:flex; flex:3; background-color: #fff;margin-bottom: 15px;">
                <wi-droppable ng-if="self.selectedNode" style="display:flex;flex:1;"
                              on-drop="self.onDrop"
                              container-style="{display:'flex',flex: 1}">
                    <div style="display:flex;flex:3;">
                        <explorer style="flex:3; position: relative;" update-code="self.coding" code="self.code"
                                  cur-file="self.curFile">
                        </explorer>
                    </div>
                </wi-droppable>
            </div>
            <div style="position: relative; flex-basis: 300px; display: flex; flex-direction: column;" resizable r-directions="['top']" r-flex="true">
                <div class="label-list-view" style="padding: 12px 13px; border-bottom: 1px solid #e4e4e4; border-top: 1px solid #e4e4e4;">
                    <span>CONSOLE</span>
                </div>
                <terminal style="display: flex;flex-direction: column;flex: 1;"
                          result-html="self.resultHtml" iframe-html-link="self.iframeHtmlLink"
                          is-result-a-iframe="self.isResultAIframe">
                </terminal>
            </div>
        </div>
        <side-bar my-default-width="220" orientation="w" collapsed="false">
            <wi-tree-view tree-root="treeConfig" get-label="self.getLabel" get-icon="self.getIcon" single-node='true'
                          get-children="self.getChildren" run-match="self.runMatch" hide-unmatched="true" selected-ids="self.selectedIdsHash" click-fn='self.clickFunction' 
                          get-siblings="self.getSiblings">
                <div class="label-list-view" style="padding: 10px 13px; border-bottom: 1px solid #e4e4e4;">
                    <!-- <span>I2G</span> -->
                    <span class="fn-button" ng-click="self.refreshTree()">RELOAD</span>
                    <span class="fn-button" style=" color: #ccc;" ng-class="{autoSaveClass: self.sortByName}"
                        ng-click="self.refreshTree(); self.sortByName = !self.sortByName;">
                        <i class="fa fa-check" style="margin-right: 8px;"></i>SORT BY NAME</span>
                </div>
                <div ng-show="self.showLoading" class="loading">
                    <div class="loading-bar">
                    <span class="bar-animation"></span>
                    </div>
                </div>
            </wi-tree-view>
        </side-bar>
    </div>
</div>
<script type="text/ng-template" id="templateDeleteProject">
    <div class="ngdialog-buttons">
        <div class="newDialog">
            <div style="display: flex;align-items: center;">
                <i class="del-project-wi-python-32x32" style="margin-right: 20px; color: #ff0000;font-size: 25px;">
                </i>Delete
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 15px;"></div>
            <div style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;">
                Are you sure want delete this project</b></div>
            <div class="newDialogContent">
                <form style="justify-content: flex-end;">
                        <a style="background: #fff;
                        color: #0077be;
                        border: 1px solid;
                        overflow: hidden;
                        white-space: nowrap;
                        margin: 0;
                        text-overflow: ellipsis;
                        letter-spacing: 0;
                        text-transform: none;" 
                        class="ngdialog-button ngdialog-button-primary" ng-click="self.cancelDeletePrj()"> CANCEL </a>
                    <div>
                        <input type="submit" style="max-width: fit-content;" value="DELETE" class="ngdialog-button ngdialog-button-primary" ng-click="self.acceptDeletePrj()">
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="templateNewPrj">
    <style>
        .ngdialog-overlay{
            pointer-events: auto;
        }
    </style>
    <div class="ngdialog-buttons">
        <div class="newDialog">
            <div style="display: flex;align-items: center;">
                <i class="new-project-wi-python-32x32" style="margin-right: 20px; color: #00c571;font-size: 25px;">
                </i>New Project
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 15px;"></div>
            <div style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;">
                Please enter the project name:</div>
            <div class="newDialogContent">
                <form>
                    <input style="flex: 1;" type="text" placeholder="Enter project name" ng-model="self.nameProject">
                    <input style="max-width: fit-content;" type="submit" value="New" class="ngdialog-button ngdialog-button-primary" ng-click="self.acceptNewPrj()">
                </form>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="templateNewFile">
    <div class="ngdialog-buttons">
        <div class="newDialog">
            <div style="display: flex;align-items: center;">
                <i class="new-file-wi-python-32x32" style="margin-right: 20px; color: #00c571;font-size: 25px;">
                </i>New File
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 15px;"></div>
            <div style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;">
                New file in path <b>{{self.curPath}}/...</b></div>
            <div class="newDialogContent">
                <form>
                    <input style="flex: 1;"type="text" placeholder="Enter file name" ng-model="self.nameFileNew">
                    <input style="max-width: fit-content;" type="submit" value="New" class="ngdialog-button ngdialog-button-primary" ng-click="self.acceptNewFile()">
                </form>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="templateWarningSave">
    <div class="ngdialog-buttons">
        <div class="newDialog">
            <div style="display: flex;align-items: center; justify-content: space-between;">
                <div style="display: flex;align-items: center;">
                    <i class="warning-save-project-wi-python-32x32" style="margin-right: 20px; color: #f1b500;font-size: 25px;">
                    </i>Warning
                </div>
                <div style="display: flex; align-items: center; font-weight: 300;color: #666;font-size: 13px; font-style: italic;">
                    Don't ask me
                    <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider round" ng-click="self.askSave = !self.askSave"></span>
                    </label>
                </div>
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 15px;"></div>
            <div style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;margin-bottom: 30px;">
                Save changes to the previous file before closing? </div>
            <div class="newDialogContent">
                <form style="justify-content: space-between;">
                        <a style="background: #fff;
                        color: #0077be;
                        border: 1px solid;
                        overflow: hidden;
                        white-space: nowrap;
                        margin: 0;
                        text-overflow: ellipsis;
                        letter-spacing: 0;
                        text-transform: none; " 
                        class="ngdialog-button ngdialog-button-primary" ng-click="self.acceptDontSave()"> Don't save </a>
                    <div>
                        <input type="submit" style="max-width: fit-content;" value="Save" class="ngdialog-button ngdialog-button-primary" ng-click="self.acceptSave()">
                
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="templateNewFolder">
    <div class="ngdialog-buttons">
        <div class="newDialog">
            <div style="display: flex;align-items: center;">
                <i class="new-folder-wi-python-32x32" style="margin-right: 20px; color: #00c571;font-size: 25px;">
                </i>New Folder
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 15px;"></div>
            <div style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;">
                New folder in path <b>{{self.curPath}}</b>/...</div>
            <div class="newDialogContent">
                <form>
                    <input style="flex: 1;" type="text" placeholder="Enter folder name" ng-model="self.nameFolderNew">
                    <input style="max-width: fit-content;" type="submit" value="New" class="ngdialog-button ngdialog-button-primary" ng-click="self.acceptNewFolder()">
                </form>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="templateAbout">
    <style>
        .ngdialog.ngdialog-theme-default .ngdialog-content {
            padding: 0;
        }
        .newDialog > div {
            margin-bottom: 0;
            border-radius: 5px;
        }
        .ngdialog-overlay {
            background: rgba(255, 255, 255, 0);
        }
    </style>
    <div class="ngdialog-buttons">
        <div class="newDialog" style="display: flex;flex-direction: column;justify-content: center;align-items: center;padding: 0; font-size: 15px; font-weight: bold;">
            <div class="area" style="position: relative; display: flex;align-items: center; justify-content: center;">
                <div style="position: absolute; color: #fff;">
                    <div style="font-size: 22px;">Online editor client</div>
                    <div style="border-bottom: 1px solid #f1f0f0; margin: 10px 0 15px 0; width: 60%;"></div>
                    <div style="font-weight: 300; font-size: 13px; font-style: italic;">Version 1.0 (Official Build)
                    </div>
                    <div style="font-weight: 300; font-size: 13px; font-style: italic;">Recommend Google Chrome Browser
                    </div>
                    <div style="font-weight: 300; font-size: 13px; font-style: italic;">2019-05-15T21:49:51.528Z
                    </div>
                    <div style="font-weight: 300; font-size: 13px; font-style: italic;">Copyright (C) 2019
                        Revotech. All rights reserved
                    </div>
                </div>
                <ul class="circles">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </div >
        </div>
</script>
<script type="text/ng-template" id="templateWarning">
    <div class="ngdialog-buttons">
        <div class="newDialog">
            <div style="display: flex;align-items: center;">
                <i ng-show="self.delFile" class="del-file-wi-python-32x32" style="margin-right: 20px; color: #ff825b;font-size: 25px;"></i>
                <i ng-show="self.delFolder" class="del-folder-wi-python-32x32" style="margin-right: 20px; color: #ff825b;font-size: 25px;"></i>
                Delete
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 15px;"></div>
            <div ng-show="self.delFile" style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;">
                Are you sure want delete file: <b>{{self.curFile}}</b></div>
            <div ng-show="self.delFolder" style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;">
                Are you sure want delete folder: <b>{{self.curFolder}}</b></div>
            <div class="newDialogContent">
                <form style="justify-content: flex-end;">
                        <a style="background: #fff;
                        color: #0077be;
                        border: 1px solid;
                        overflow: hidden;
                        white-space: nowrap;
                        margin: 0;
                        text-overflow: ellipsis;
                        letter-spacing: 0;
                        text-transform: none;" 
                        class="ngdialog-button ngdialog-button-primary" ng-click="self.cancelDelete()"> CANCEL </a>
                    <div>
                        <input type="submit" style="max-width: fit-content;" value="DELETE" class="ngdialog-button ngdialog-button-primary" ng-click="self.acceptDelete()">
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="templateRename">
    <div class="ngdialog-buttons">
        <div class="newDialog">
            <div style="display: flex;align-items: center;">
                <i class="rename-wi-python-32x32" style="margin-right: 20px; color: #0074c5;font-size: 25px;">
                </i>Rename
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 15px;"></div>
            <div ng-show="self.delFile" style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;">
                Rename file: <b>{{self.curFile}}</b> with name: </div>
            <div ng-show="self.delFolder" style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;">
                Rename folder: <b>{{self.curFolder}}</b> with name: </div>
            <div class="newDialogContent">
                <form>
                    <input style="flex: 1;" type="text" placeholder="Enter new name" ng-model="self.newFileName">
                    <input style="max-width: fit-content;" type="submit" value="DONE" class="ngdialog-button ngdialog-button-primary" ng-click="self.acceptRename()">
                </form>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="templateRestore">
    <style>
        .ngdialog-overlay{
            pointer-events: none;
        }
    </style>
    <div class="ngdialog-buttons">
        <div class="newDialog">
            <div style="display: flex;align-items: center;">
                <i class="restore-project-wi-python-32x32" style="margin-right: 20px;">
                </i>Restore opened project
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 30px;"></div>
            <div class="newDialogContent" style="display:flex; justify-content: space-between;">
                <a style="background: #fff;
                color: #0077be;
                border: 1px solid;
                overflow: hidden;
                white-space: nowrap;
                width: 226px;
                margin: 0;
                text-overflow: ellipsis;
                letter-spacing: 0;
                text-transform: none;" 
                class="ngdialog-button ngdialog-button-primary" ng-click="self.acceptRestore()">
                <i style="margin-right:10px;"class="ti-arrow-left" aria-hidden="true"></i>
                <b>{{self.curPrj}}</b> </a>
                <a style="border: 1px solid #0077be;" class="ngdialog-button ngdialog-button-primary" ng-click="self.findAllProjects()">Other<i style="margin-left:10px;"class="ti-arrow-right" aria-hidden="true"></i></a>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="templateOpenProject">
    <div class="ngdialog-buttons">
        <div class="newDialog">
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <div>Open Projects</div>
                <input class="searchInput" type="text" placeholder="Search project" ng-model="searchProject">
                <a class="new-circle" ng-click="self.createNewProject()"><i class="fa fa-plus"></i></a>
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 15px;"></div>

            <div class="newDialogContent" style="overflow-y: auto; max-height: 203px;">
                <ul class="list-project">
                    <li ng-repeat="project in self.allProjects | filter:searchProject track by $index"
                        ng-click="self.selectedProject = project;"
                        ng-class="{selectedProject: self.selectedProject == project}">
                        <span ng-bind="project"></span>
                        <span class="fa fa-times-circle del"
                              ng-click="event.stopPropagation(); self.delProject(project);"></span>
                    </li>
                </ul>
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 15px;"></div>
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <div style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;">
                    Projects has been arranged alphabetically.
                </div>
                <div>
                    <a class="ngdialog-button ngdialog-button-primary"
                       ng-click="self.openProject(self.selectedProject);">OPEN</a>
                </div>
            </div>

        </div>

    </div>
</script>
<script type="text/ng-template" id="templateConnectionError">
    <div class="ngdialog-buttons">
        <div class="newDialog">
            <div style="display: flex;align-items: center;">
                <i class="connection-error-wi-python-32x32" style="margin-right: 20px; color: #0074c5;font-size: 25px;">
                </i>Connection has problems
            </div>
            <div style="border-bottom: 1px solid #f1f0f0; margin-bottom: 15px;"></div>
            <div style="font-weight: 300; color: #666; font-size: 13px; font-style: italic;">
                Try reconnecting the Wifi or LAN network</div>
            <div class="newDialogContent">
                <form style="justify-content: flex-end;">
                    <div>
                        <input type="submit" style="max-width: fit-content;" value="RELOAD PAGE" class="ngdialog-button ngdialog-button-primary" ng-click="self.cancelReload()">
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>